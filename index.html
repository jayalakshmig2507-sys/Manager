<!DOCTYPE html>
<html>
<head>
  <title>Public Enquiry Form</title>
  <script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-firestore.js";

    // Your actual Firebase project config
    const firebaseConfig = {
      apiKey: "AIzaSyAqDsqgTeRD3sAXncZVPFkKinOVYZ2VXo4",
      authDomain: "customer-enquiry-manager.firebaseapp.com",
      projectId: "customer-enquiry-manager",
      storageBucket: "customer-enquiry-manager.firebasestorage.app",
      messagingSenderId: "917955055710",
      appId: "1:917955055710:web:5fb547b9462eda55fde4cf",
      measurementId: "G-890LYDT9CW"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.submitEnquiry = async function(e) {
      e.preventDefault();
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const department = document.getElementById("department").value;
      const message = document.getElementById("message").value;

      try {
        await addDoc(collection(db, "enquiries"), {
          name,
          email,
          department,
          message,
          status: "New",
          createdAt: serverTimestamp()
        });
        alert("Enquiry submitted successfully!");
        document.getElementById("enquiryForm").reset();
      } catch (error) {
        console.error("Error submitting enquiry:", error);
        alert("Failed to submit enquiry. Check console.");
      }
    };
  </script>
</head>
<body>
  <h2>Public Enquiry Form</h2>
  <form id="enquiryForm" onsubmit="submitEnquiry(event)" style="max-width:400px;margin:auto;">
    <input type="text" id="name" placeholder="Name" required style="width:100%;margin-bottom:10px;padding:8px;" />
    <input type="email" id="email" placeholder="Email" required style="width:100%;margin-bottom:10px;padding:8px;" />
    <select id="department" style="width:100%;margin-bottom:10px;padding:8px;">
      <option value="Sales">Sales</option>
      <option value="Support">Support</option>
      <option value="HR">HR</option>
    </select>
    <textarea id="message" placeholder="Your message" required style="width:100%;margin-bottom:10px;padding:8px;"></textarea>
    <button type="submit" style="width:100%;padding:10px;background-color:#007bff;color:white;border:none;cursor:pointer;">
      Submit Enquiry
    </button>
  </form>
</body>
</html>
